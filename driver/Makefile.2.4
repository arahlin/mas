CC	:= gcc

KERNELVER ?= $(shell uname -r)
KERNELDIR ?= /usr/src/linux
INSTALLDIR ?= /lib/modules/$(KERNELVER)/misc/

DRIVER_FILE = $(DRIVER_NAME).o

INCLUDES += -I${KERNELDIR}/include

CFLAGS	:= -O2 -DMODULE -D__KERNEL__ -DLINUX -Wall \
	-Wstrict-prototypes  $(DEFS) $(INCLUDES) $(MY_CFLAGS)

default: $(DRIVER_NAME).o

$(DRIVER_FILE): $(SOURCE_OBJ)
	ld -r $(SOURCE_OBJ) -o $@

depend:
	makedepend -- $(CFLAGS) -- $(SOURCE)

kversion_clean:
